

<!-- preview.html -->
<h3>QR Code Preview:</h3>
<img id="qrImage" src="data:image/png;base64,{{ img_base64 }}" alt="QR Code" />
<br/>
<button onclick="printQRCode()">Print QR Code</button>
<br/>
<a download="qr-code.pdf" href="data:application/pdf;base64,{{ pdf_b64 }}">Download as PDF</a>
<br/>
<a href="/">Upload Another</a>

<!-- <img id="qrImage" src="data:image/png;base64,{{ img_base64 }}" alt="QR Code" /> -->

<script>
function printQRCode() {
    const img = document.getElementById('qrImage');
    const qrSrc = img ? img.src : '';

    const w = window.open('', '', 'height=600,width=800');
    w.document.write(`
        <html>
        <head><title>Print QR Code</title></head>
        <body style="text-align:center; margin-top:40px;">
            <img src="${qrSrc}" id="printQR" style="max-width:100%; height:auto;" />
        </body>
        </html>
    `);

    // Wait for image to load, then trigger print
    w.document.close();
    w.onload = () => {
        const printedImg = w.document.getElementById('printQR');
        if (printedImg.complete) {
            w.focus();
            w.print();
            w.close();
        } else {
            printedImg.onload = () => {
                w.focus();
                w.print();
                w.close();
            };
        }
    };
}
</script>

